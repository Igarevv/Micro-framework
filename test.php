<?php

$books = [
  [
    'title' => 'Book Title 1',
    'first_name' => 'John',
    'last_name' => 'Doe',
    'year' => 2021,
    'isbn' => '1234561278903',
    'description' => 'Description of Book 1',
    'genre' => ['horror', 'fantasy']
  ],
  [
    'title' => 'Book Title 2',
    'first_name' => 'Jane',
    'last_name' => 'Smith',
    'year' => 2019,
    'isbn' => '2380149567234',
    'description' => 'Description of Book 2',
    'genre' => ['comedy', 'drama']
  ],
  [
    'title' => 'Book Title 3',
    'first_name' => 'Alice',
    'last_name' => 'Johnson',
    'year' => 2020,
    'isbn' => '3784562390145',
    'description' => 'Description of Book 3',
    'genre' => ['roman', 'adventure']
  ],
  [
    'title' => 'Book Title 4',
    'first_name' => 'Michael',
    'last_name' => 'Brown',
    'year' => 2018,
    'isbn' => '4235016457896',
    'description' => 'Description of Book 4',
    'genre' => ['documentary', 'mystery']
  ],
  [
    'title' => 'Book Title 5',
    'first_name' => 'Emily',
    'last_name' => 'Jones',
    'year' => 2022,
    'isbn' => '0156792348567',
    'description' => 'Description of Book 5',
    'genre' => ['novel', 'horror']
  ],
  [
    'title' => 'Book Title 6',
    'first_name' => 'David',
    'last_name' => 'Garcia',
    'year' => 2017,
    'isbn' => '6234756908178',
    'description' => 'Description of Book 6',
    'genre' => ['fantasy', 'comedy']
  ],
  [
    'title' => 'Book Title 7',
    'first_name' => 'Jessica',
    'last_name' => 'Martinez',
    'year' => 2023,
    'isbn' => '7485671908239',
    'description' => 'Description of Book 7',
    'genre' => ['drama', 'roman']
  ],
  [
    'title' => 'Book Title 8',
    'first_name' => 'Daniel',
    'last_name' => 'Lee',
    'year' => 2016,
    'isbn' => '8945036789120',
    'description' => 'Description of Book 8',
    'genre' => ['adventure', 'documentary']
  ],
  [
    'title' => 'Book Title 9',
    'first_name' => 'Sarah',
    'last_name' => 'Taylor',
    'year' => 2024,
    'isbn' => '9012786934501',
    'description' => 'Description of Book 9',
    'genre' => ['mystery', 'novel']
  ],
  [
    'title' => 'Book Title 10',
    'first_name' => 'Kevin',
    'last_name' => 'Anderson',
    'year' => 2015,
    'isbn' => '0123784901562',
    'description' => 'Description of Book 10',
    'genre' => ['horror', 'fantasy']
  ],
  [
    'title' => 'Book Title 1',
    'first_name' => 'John',
    'last_name' => 'Doe',
    'year' => 2021,
    'isbn' => '0278334619025',
    'description' => 'Description of Book 1',
    'genre' => ['horror', 'fantasy']
  ],
  [
    'title' => 'Book Title 2',
    'first_name' => 'Jane',
    'last_name' => 'Smith',
    'year' => 2019,
    'isbn' => '1700945631284',
    'description' => 'Description of Book 2',
    'genre' => ['comedy', 'drama']
  ],
  [
    'title' => 'Book Title 3',
    'first_name' => 'Alice',
    'last_name' => 'Johnson',
    'year' => 2020,
    'isbn' => '2456911732485',
    'description' => 'Description of Book 3',
    'genre' => ['roman', 'adventure']
  ],
  [
    'title' => 'Book Title 4',
    'first_name' => 'Michael',
    'last_name' => 'Brown',
    'year' => 2018,
    'isbn' => '4906781230416',
    'description' => 'Description of Book 4',
    'genre' => ['documentary', 'mystery']
  ],
  [
    'title' => 'Book Title 5',
    'first_name' => 'Emily',
    'last_name' => 'Jones',
    'year' => 2022,
    'isbn' => '1906702485367',
    'description' => 'Description of Book 5',
    'genre' => ['novel', 'horror']
  ],
  [
    'title' => 'Book Title 6',
    'first_name' => 'David',
    'last_name' => 'Garcia',
    'year' => 2017,
    'isbn' => '1078923467801',
    'description' => 'Description of Book 6',
    'genre' => ['fantasy', 'comedy']
  ],
  [
    'title' => 'Book Title 7',
    'first_name' => 'Jessica',
    'last_name' => 'Martinez',
    'year' => 2023,
    'isbn' => '0402898735129',
    'description' => 'Description of Book 7',
    'genre' => ['drama', 'roman']
  ],
  [
    'title' => 'Book Title 8',
    'first_name' => 'Daniel',
    'last_name' => 'Lee',
    'year' => 2016,
    'isbn' => '2090617234590',
    'description' => 'Description of Book 8',
    'genre' => ['adventure', 'documentary']
  ],
  [
    'title' => 'Book Title 9',
    'first_name' => 'Sarah',
    'last_name' => 'Taylor',
    'year' => 2024,
    'isbn' => '4016357800121',
    'description' => 'Description of Book 9',
    'genre' => ['mystery', 'novel']
  ],
  [
    'title' => 'Book Title 10',
    'first_name' => 'Kevin',
    'last_name' => 'Anderson',
    'year' => 2015,
    'isbn' => '4928231017692',
    'description' => 'Description of Book 10',
    'genre' => ['horror', 'fantasy']
  ],
  [
    'title' => 'Book Title 1',
    'first_name' => 'John',
    'last_name' => 'Doe',
    'year' => 2021,
    'isbn' => '1415273456890',
    'description' => 'Description of Book 1',
    'genre' => ['horror', 'fantasy']
  ],
  [
    'title' => 'Book Title 2',
    'first_name' => 'Jane',
    'last_name' => 'Smith',
    'year' => 2019,
    'isbn' => '1284895012367',
    'description' => 'Description of Book 2',
    'genre' => ['comedy', 'drama']
  ],
  [
    'title' => 'Book Title 3',
    'first_name' => 'Alice',
    'last_name' => 'Johnson',
    'year' => 2020,
    'isbn' => '2827154590346',
    'description' => 'Description of Book 3',
    'genre' => ['roman', 'adventure']
  ],
  [
    'title' => 'Book Title 4',
    'first_name' => 'Michael',
    'last_name' => 'Brown',
    'year' => 2018,
    'isbn' => '1237894501456',
    'description' => 'Description of Book 4',
    'genre' => ['documentary', 'mystery']
  ],
  [
    'title' => 'Book Title 5',
    'first_name' => 'Emily',
    'last_name' => 'Jones',
    'year' => 2022,
    'isbn' => '5650125678593',
    'description' => 'Description of Book 5',
    'genre' => ['novel', 'horror']
  ],
  [
    'title' => 'Book Title 6',
    'first_name' => 'David',
    'last_name' => 'Garcia',
    'year' => 2017,
    'isbn' => '0767175678894',
    'description' => 'Description of Book 6',
    'genre' => ['fantasy', 'comedy']
  ],
  [
    'title' => 'Book Title 7',
    'first_name' => 'Jessica',
    'last_name' => 'Martinez',
    'year' => 2023,
    'isbn' => '1472309485678',
    'description' => 'Description of Book 7',
    'genre' => ['drama', 'roman']
  ],
  [
    'title' => 'Book Title 8',
    'first_name' => 'Daniel',
    'last_name' => 'Lee',
    'year' => 2016,
    'isbn' => '4813564978290',
    'description' => 'Description of Book 8',
    'genre' => ['adventure', 'documentary']
  ],
  [
    'title' => 'Book Title 9',
    'first_name' => 'Sarah',
    'last_name' => 'Taylor',
    'year' => 2024,
    'isbn' => '9110014856701',
    'description' => 'Description of Book 9',
    'genre' => ['mystery', 'novel']
  ],
  [
    'title' => 'Book Title 10',
    'first_name' => 'Kevin',
    'last_name' => 'Anderson',
    'year' => 2015,
    'isbn' => '5501012347842',
    'description' => 'Description of Book 10',
    'genre' => ['horror', 'fantasy']
  ],
  [
    'title' => 'Book Title 1',
    'first_name' => 'John',
    'last_name' => 'Doe',
    'year' => 2021,
    'isbn' => '4533906843107',
    'description' => 'Description of Book 1',
    'genre' => ['horror', 'fantasy']
  ],
  [
    'title' => 'Book Title 2',
    'first_name' => 'Jane',
    'last_name' => 'Smith',
    'year' => 2019,
    'isbn' => '9512173453468',
    'description' => 'Description of Book 2',
    'genre' => ['comedy', 'drama']
  ],
  [
    'title' => 'Book Title 3',
    'first_name' => 'Alice',
    'last_name' => 'Johnson',
    'year' => 2020,
    'isbn' => '8932213556704',
    'description' => 'Description of Book 3',
    'genre' => ['roman', 'adventure']
  ],
  [
    'title' => 'Book Title 4',
    'first_name' => 'Michael',
    'last_name' => 'Brown',
    'year' => 2018,
    'isbn' => '9156785432561',
    'description' => 'Description of Book 4',
    'genre' => ['documentary', 'mystery']
  ],
  [
    'title' => 'Book Title 5',
    'first_name' => 'Emily',
    'last_name' => 'Jones',
    'year' => 2022,
    'isbn' => '8202164701367',
    'description' => 'Description of Book 5',
    'genre' => ['novel', 'horror']
  ],
  [
    'title' => 'Book Title 6',
    'first_name' => 'David',
    'last_name' => 'Garcia',
    'year' => 2017,
    'isbn' => '2111103485912',
    'description' => 'Description of Book 6',
    'genre' => ['fantasy', 'comedy']
  ],
  [
    'title' => 'Book Title 7',
    'first_name' => 'Jessica',
    'last_name' => 'Martinez',
    'year' => 2023,
    'isbn' => '3260127345281',
    'description' => 'Description of Book 7',
    'genre' => ['drama', 'roman']
  ],
  [
    'title' => 'Book Title 8',
    'first_name' => 'Daniel',
    'last_name' => 'Lee',
    'year' => 2016,
    'isbn' => '8767111111852',
    'description' => 'Description of Book 8',
    'genre' => ['adventure', 'documentary']
  ],
  [
    'title' => 'Book Title 9',
    'first_name' => 'Sarah',
    'last_name' => 'Taylor',
    'year' => 2024,
    'isbn' => '8767708091852',
    'description' => 'Description of Book 9',
    'genre' => ['mystery', 'novel']
  ],
  [
    'title' => 'Book Title 10',
    'first_name' => 'Kevin',
    'last_name' => 'Anderson',
    'year' => 2015,
    'isbn' => '8767111111852',
    'description' => 'Description of Book 10',
    'genre' => ['horror', 'fantasy']
  ]
];

$seenISBNs = [];
$duplicateIndexes = [];

foreach ($books as $index => $item) {
    $isbn = $item['isbn'];

    if (isset($seenISBNs[$isbn])) {
        if (!isset($duplicateIndexes[$isbn])) {
            $duplicateIndexes[$isbn] = [$seenISBNs[$isbn]];
        }
        $duplicateIndexes[$isbn][] = $index;
    } else {
        $seenISBNs[$isbn] = $index;
    }
}

/*$file = fopen('/var/www/nginx/Micro-framework/CQRS/storage/book1.csv', 'ab');

foreach ($books as $book) {
    $genre = implode(', ', $book['genre']);

    fputcsv($file, [
      $book['title'],
      $book['first_name'],
      $book['last_name'],
      $book['year'],
      $book['isbn'],
      $book['description'],
      $genre
    ], ';');
}*/